<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.21.2: https://docutils.sourceforge.io/" />
<title>Building Your First Model with CA Model Builder</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 9511 2024-01-13 09:50:07Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
Despite the name, some widely supported CSS2 features are used.

See https://docutils.sourceforge.io/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: gray; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic, pre.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="building-your-first-model-with-ca-model-builder">
<h1 class="title">Building Your First Model with CA Model Builder</h1>

<p>This tutorial builds on the introduction provided in <a class="reference external" href="CA-model-builder-introduction.rst">CA model builder introduction</a> to help users in assembling their first model. Before starting the tutorial, please ensure you have cloned the repository and installed the necessary dependencies as outlined in the <a class="reference external" href="../README.rst">README</a>. Start the application by navigating the ca-model-builder directory in your terminal and running the command:</p>
<pre class="literal-block">
yarn dev
</pre>
<p>Copy and paste the local development server address (usually <a class="reference external" href="http://localhost:5173">http://localhost:5173</a>) into your web browser to access the CA Model Builder user interface. The terminal should look similar to the image below and the server address follows the &quot;Local:&quot; label:</p>
<img alt="Local development server address in terminal" class="align-center" src="assets/images/local-dev-server.png" style="width: 600px;" />
<div class="section" id="step-1-import-cellml-modules">
<h1>Step 1: Import CellML Modules</h1>
<p>The first step in building a model is to import the desired CellML modules into CAMB. This can be done by clicking the &quot;Load Modules&quot; button located in the upper-right-hand corner of the user interface.</p>
<img alt="Load Modules button highlighted in user interface" class="align-center" src="assets/images/import-module.png" style="width: 600px;" />
<p>A file dialog will appear, allowing users to select one or more CellML files from their local filesystem. Once selected, the components listed in the module file will be added to the Module List on the left-hand side of the interface.</p>
<p>For the purposes of this tutorial, the CellML file colon_FTU_modules.cellml has already been imported into CAMB.</p>
</div>
<div class="section" id="step-2-add-modules-to-workspace">
<h1>Step 2: Add Modules to Workspace</h1>
<p>To add a module to the workspace area, simply drag and drop the desired module from the Module List into the central workspace area. Each module will appear as a node, displaying its name and associated CellML component. Users can rename the module by double-clicking on the module name. When satisified with the name, press Enter or click outside the text box to save the changes.</p>
<p>Drag and drop the &quot;simple_lumen&quot;, &quot;simple_membrane&quot;, &quot;ENaC&quot;, and &quot;simple_cell&quot; modules from the Module List into the workspace area.</p>
<img alt="Modules placed in workspace area" class="align-center" src="assets/images/modules-placed-no-name.png" style="width: 600px;" />
<p>Rename the modules to &quot;Lumen&quot;, &quot;Membrane&quot;, and &quot;Cell&quot;, respectively. Leave the ENaC module name unchanged. The workspace should now look similar to the following image:</p>
<img alt="Modules placed in workspace area" class="align-center" src="assets/images/modules-placed-renamed.png" style="width: 600px;" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The colour of modules can be changed at anytime using the key icon on each module node. This is purely for visual identification and has no effect on the exported model.</p>
</div>
</div>
<div class="section" id="step-3-create-ports-nodes">
<h1>Step 3: Create Ports Nodes</h1>
<p>To indicate that two modules have shared variables, users need to create port nodes on the relevant module nodes. This can be done by clicking the pin icon on the module node, which will allow the user to add new port nodes to the module.</p>
<p>Add port nodes to the module nodes as in the following image:</p>
<img alt="Modules with port nodes added" class="align-center" src="assets/images/modules-port-nodes.png" style="width: 600px;" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Port nodes can be added to the top, left, right, or bottom of the module node by clicking the corresponding area around the pin icon. Port nodes can be deleted by hovering over with the cursor and clicking the &quot;trash&quot; icon that appears.</p>
</div>
</div>
<div class="section" id="step-4-connect-ports-nodes-to-indicate-shared-variables">
<h1>Step 4: Connect Ports Nodes to Indicate Shared Variables</h1>
<p>Once port nodes have been created on the relevant modules, users can connect them by clicking and dragging from one port to another. This will create an arrow indicating that the two modules share a variable.</p>
<p>Connect the port nodes as shown in the following image:</p>
<img alt="Modules with connected ports" class="align-center" src="assets/images/modules-connected.png" style="width: 600px;" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this example, each arrow has its own port, but multiple arrows can leave or enter a single port node.</p>
</div>
</div>
<div class="section" id="step-5-define-ports-on-each-module">
<h1>Step 5: Define Ports on each Module</h1>
<p>To define the variable associated with each port, click on the pencil icon, which will open the Edit Module dialog. In this dialog, users can select the variable from a dropdown list populated with variables from the CellML module and port names can be edited manually.</p>
<p>Define the ports as shown in the following images:</p>
<div class="section" id="lumen">
<h2>Lumen</h2>
<img alt="Defining ports for Lumen module" class="align-center" src="assets/images/ports-lumen.png" style="width: 600px;" />
</div>
<div class="section" id="membrane">
<h2>Membrane</h2>
<img alt="Defining ports for membrane module" class="align-center" src="assets/images/ports-membrane.png" style="width: 600px;" />
</div>
<div class="section" id="enac">
<h2>ENaC</h2>
<img alt="Defining ports for ENaC module" class="align-center" src="assets/images/ports-ENaC.png" style="width: 600px;" />
</div>
<div class="section" id="cell">
<h2>Cell</h2>
<img alt="Defining ports for Cell module" class="align-center" src="assets/images/ports-Cell.png" style="width: 600px;" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Port names can be thought of as a mapping between the variable name in a given CellML module and the shared variable name used in Circulatory Autogen.</p>
</div>
</div>
</div>
<div class="section" id="step-6-import-parameter-file">
<h1>Step 6: Import Parameter File</h1>
<p>CAMB currently requires the user to upload the Circulatory Autogen parameter file (model_name_parameters.csv) to determine which variables are constants or global_constants. This can be done by clicking the &quot;Load Parameters&quot; button located in the upper-right-hand corner of the user interface. A file dialog will appear, allowing users to select the parameter CSV file from their local filesystem.</p>
<p>For the purposes of this tutorial, the parameters file colon_FTU_parameters.csv has already been imported into CAMB.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Parameter names in the parameter file must follow the naming convention required by Circulatory Autogen ([module_name]_[parameter_name] for constants and [parameter_name] for global_constants). It is essential that these exactly match parameter and module names in CAMB.</p>
</div>
</div>
<div class="section" id="step-7-export-model-workspace">
<h1>Step 7: Export Model Workspace</h1>
<p>Once the model has been assembled and all ports have been defined, users can export the model workspace by clicking the &quot;Export Model&quot; button located in the upper-right-hand corner of the user interface. This will download a ZIP archive containing the vessel_array.csv and module_config.json files for use in Circulatory Autogen.</p>
</div>
<div class="section" id="step-8-save-load-workspace-optional">
<h1>Step 8: Save/Load Workspace (Optional)</h1>
<p>Users can save their current workspace by clicking the &quot;Save Model&quot; button located in the upper-right-hand corner of the user interface. This will download a JSON file representing the current state of the workspace, including module positions, port definitions, and connections.</p>
<p>To load a previously saved workspace, click the &quot;Load Model&quot; button and select the JSON file from your local filesystem. The workspace will be restored to the state it was in when it was saved.</p>
</div>
</div>
</body>
</html>
